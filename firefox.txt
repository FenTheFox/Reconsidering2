(coppied from honors thesis)
Firefox’s custom allocator is not fully custom but rather a modification of Jemalloc, which is described in more detail below. Rather than explain the entire allocator twice I will focus on what changes they made to it. They do not allow jemalloc to recycle chunks, instead preferring to munmap them. They disable the use of multiple arenas because “Mozilla does not currently make extensive use of concurrent allocation, so the increased fragmentation associated with multiple arenas is not warranted.” The only other major change is that they MADV_DONTNEED when they free a chunk and recycling is enabled. The rest of the differences come from the fact that they forked Jemalloc several years ago. In that time Jemalloc has continued development and the Firefox team have had to port over changes piecemeal. 